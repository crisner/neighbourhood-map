(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{129:function(e,t,a){e.exports=a(288)},134:function(e,t,a){},16:function(e,t,a){e.exports={Popup:"Popup_Popup__2fu74",button:"Popup_button__1uPdt",title:"Popup_title__3szrG",subtitle:"Popup_subtitle__1az9f",details:"Popup_details__1Lwyp",img:"Popup_img__2cLhO",ratingDetails:"Popup_ratingDetails__2POzi",stars:"Popup_stars__2Q0pH",ratingValue:"Popup_ratingValue__2uLDS",address:"Popup_address__11BFg",list:"Popup_list__UW6Vk",listItem:"Popup_listItem__2DFRr"}},283:function(e,t,a){},288:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(17),i=a.n(o),s=(a(134),a(26)),l=a(27),c=a(29),u=a(28),p=a(30),d=a(35),h=a(96),m=a.n(h),f=(a(136),a(49)),g=a(14),b=a(98),v=a.n(b),w=a(99),y=a.n(w),_=a(50),k=a.n(_),E=a(65),x=a.n(E),I=a(51),O=a.n(I),C=Object(g.createMuiTheme)({palette:{type:"dark"},typography:{useNextVariants:!0},overrides:{MuiListItemText:{root:{padding:0}},MuiList:{padding:{paddingTop:0,paddingBottom:"28px"}}}});var j=Object(g.withStyles)(function(e){return{appBar:{zIndex:e.zIndex.drawer+1},drawer:{width:240,flexShrink:0},drawerPaper:{width:240},toolbar:e.mixins.toolbar,listItem:{display:"flex",flexDirection:"column",alignItems:"flex-start"}}})(function(e){var t=e.classes,a=e.location;return r.a.createElement(g.MuiThemeProvider,{theme:C},r.a.createElement(v.a,{open:e.open,className:t.drawer,variant:"persistent",classes:{paper:t.drawerPaper}},r.a.createElement("div",{className:t.toolbar}),r.a.createElement(y.a,{role:"list"},r.a.createElement(k.a,null),a.hasOwnProperty("status")&&200!==a.status?r.a.createElement("div",{key:"".concat(a.status,"no-list")},r.a.createElement(x.a,{role:"listitem",className:t.listItem,button:!0},r.a.createElement(O.a,{primary:"No restaurants found"})),r.a.createElement(k.a,null)):a.map(function(a){return r.a.createElement("div",{key:a.res_id},r.a.createElement(x.a,{role:"listitem",className:t.listItem,button:!0,onClick:function(){e.clickInfo(a),e.marker(a),e.toggle()}},r.a.createElement(O.a,{primary:a.name}),r.a.createElement(O.a,{secondary:a.locality})),r.a.createElement(k.a,null))}))))}),N=a(100),S=a.n(N),P=a(101),R=a.n(P),T=a(102),M=a.n(T),A=a(34),z=a.n(A),W=a(105),B=a.n(W),H=a(20),L=a(103),D=a.n(L),V=a(104),q=a.n(V);window.__MUI_USE_NEXT_TYPOGRAPHY_VARIANTS__=!0;var F=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1},a.handleDrawerOpen=function(){a.setState(function(e){return{open:!e.open}})},a.onChangeHandler=function(e){var t=e.target.value;a.props.updateQuery(t)},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.location,n=this.state.open;return r.a.createElement("div",{className:t.root},r.a.createElement(S.a,{role:"navigation",position:"fixed",className:t.appBar},r.a.createElement(R.a,{role:"toolbar"},r.a.createElement(M.a,{color:"inherit","aria-label":"Open drawer",onClick:this.handleDrawerOpen,className:t.menuButton},r.a.createElement(D.a,null)),r.a.createElement(z.a,{tabIndex:"0",className:t.title,variant:"h6",color:"inherit",noWrap:!0},"Restaurants in Coimbatore, TN"),r.a.createElement("div",{className:t.grow}),r.a.createElement("div",{className:t.search},r.a.createElement("div",{className:t.searchIcon},r.a.createElement(q.a,{role:"searchbox","aria-label":"Search for restaurants in Coimbatore, TN"})),r.a.createElement(B.a,{onChange:this.onChangeHandler,placeholder:"Search\u2026",value:this.props.query,classes:{root:t.inputRoot,input:t.inputInput}})))),r.a.createElement(j,{open:n,marker:this.props.marker,toggle:this.handleDrawerOpen.bind(this),location:a,clickInfo:this.props.clickInfo}))}}]),t}(n.Component),U=Object(g.withStyles)(function(e){return{root:{width:"100%"},grow:{flexGrow:1},appBar:{zIndex:e.zIndex.drawer+1},menuButton:{marginLeft:-12,marginRight:20},title:Object(f.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"}),search:Object(f.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(H.fade)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(H.fade)(e.palette.common.white,.25)},marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing.unit,width:"auto"}),searchIcon:{width:9*e.spacing.unit,height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit",width:"100%"},inputInput:Object(f.a)({paddingTop:e.spacing.unit,paddingRight:e.spacing.unit,paddingBottom:e.spacing.unit,paddingLeft:10*e.spacing.unit,transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:120,"&:focus":{width:200}})}})(F),Q=a(38),J=a(16),Y=a.n(J);var Z=function(e){var t=e.details.hasOwnProperty("status")&&200!==e.details.status||e.details.hasOwnProperty("message"),a=void 0===e.user_rating?null:Number(e.user_rating.aggregate_rating);return r.a.createElement("div",{className:Y.a.Popup},r.a.createElement("button",{title:"Close",className:Y.a.button,onClick:e.closeOnClick},"x"),r.a.createElement("h4",{tabIndex:"0",className:Y.a.title},e.popupInfo.name),r.a.createElement("div",{tabIndex:"0",className:Y.a.details},t?r.a.createElement("p",{className:Y.a.address},"No details found"):null,t||""===e.details.thumb?null:r.a.createElement("img",{className:Y.a.img,src:e.details.thumb,alt:e.details.name}),r.a.createElement("p",{className:Y.a.ratingDetails},r.a.createElement("span",{className:Y.a.stars},t?null:e.displayStarRating(a)),r.a.createElement("span",{className:Y.a.ratingValue},t||void 0===e.user_rating?null:e.user_rating.aggregate_rating),r.a.createElement("br",null),r.a.createElement("span",null,t||void 0===e.user_rating?null:"1"===e.user_rating.votes?" 1 vote":" ".concat(e.user_rating.votes," votes")),r.a.createElement("br",null),r.a.createElement("span",{className:Y.a.address},t||void 0===e.location?null:e.location.address))))},G=a(68),X=a.n(G),K=a(128),$=a(124),ee=a.n($),te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return Object(g.withStyles)(function(t){var a=e||t.palette.background.default;return{root:{color:t.palette.getContrastText(a),backgroundColor:a},clickable:{cursor:"pointer","&:hover, &:focus":{backgroundColor:"#f77848"},"&:active":{backgroundColor:"#f77848"}}}})(function(e){var t=e.classes,a=Object(K.a)(e,["classes"]);return r.a.createElement(ee.a,Object.assign({classes:t},a))})},ae=[[10.993437,76.909858],[11.037247,76.985733]],ne=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={viewport:{width:window.innerWidth,height:window.innerHeight,latitude:11.004556,longitude:76.961632,zoom:11,maxBounds:ae},top:0},a.onViewportChange=function(e){a.setState({viewport:e})},a.showPopup=function(){var e=a.props,t=e.popupInfo,n=e.details,o=a.props.details,i=o.location,s=o.user_rating;return t&&r.a.createElement(Z,{popupInfo:t,details:n,user_rating:s,location:i,displayStarRating:a.props.displayStarRating,closeOnClick:a.props.closeOnClick})},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.height(),t=this.props.topPosition();this.setState({viewport:{width:window.innerWidth,height:e,latitude:11.004556,longitude:76.961632,zoom:11,maxBounds:ae},top:t})}},{key:"componentWillReceiveProps",value:function(e){if(this.props.popupInfo!==e.popupInfo&&null!==e.popupInfo){var t=e.popupInfo.res_id;this.props.setRestaurantInfo(t)}}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.location,o=te("#f7b148"),i=te("#f77848");return r.a.createElement("div",{style:{position:"absolute",top:"".concat(this.state.top,"px")}},r.a.createElement(Q.c,Object.assign({role:"application",mapboxApiAccessToken:"pk.eyJ1IjoiY3Jpc25lciIsImEiOiJjam5zZ3MxZXIwY3VzM3BwMjNlejE4ZW02In0.nbAOOtQDeAzOTwK1A0YxVA",mapStyle:"mapbox://styles/crisner/cjo2rsbau30eo2sns60vykal6"},this.state.viewport,{onViewportChange:this._onViewportChange}),r.a.createElement("div",{style:{position:"absolute",right:0,top:"40px"}},r.a.createElement(Q.b,{onViewportChange:function(t){return e.setState({viewport:t})}})),n.hasOwnProperty("status")&&200!==n.status?null:n.map(function(t){return t===e.props.markerId?r.a.createElement(Q.a,{key:t.res_id,latitude:Number(t.latitude),longitude:Number(t.longitude),offsetLeft:-20,offsetTop:-10},r.a.createElement(i,{className:a.chip,icon:r.a.createElement(X.a,{className:a.icon}),onClick:function(){e.props.marker(null),e.props.clickInfo(t)}})):r.a.createElement(Q.a,{key:t.res_id,latitude:Number(t.latitude),longitude:Number(t.longitude),offsetLeft:-20,offsetTop:-10},r.a.createElement(o,{className:a.chip,icon:r.a.createElement(X.a,{className:a.icon}),onClick:function(){e.props.marker(t),e.props.clickInfo(t)}}))}),this.showPopup()))}}]),t}(n.Component),re=Object(g.withStyles)(function(e){return{root:{color:e.palette.text.primary},chip:{margin:e.spacing.unit,display:"flex",justifyContent:"center",alignItems:"flex-start",width:"1.8em",height:"1.8em",borderRadius:"100%",transform:"rotateZ(45deg)",borderBottomRightRadius:0},icon:{position:"relative",left:"50%",margin:0,alignSelf:"center",color:"#FFF",cursor:"pointer",fontSize:"16px",transform:"rotateZ(315deg)"},details:{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"left",fontSize:"0.5em"},list:{listStyle:"none",padding:0},listItem:{padding:"0.2em",fontStyle:"italic"},title:{marginBottom:"-9px"},address:{width:"100%",maxWidth:"100%",fontWeight:500,marginBottom:0}}})(ne);var oe=Object(g.withStyles)(function(e){return{p:{paddingTop:e.spacing.unit,paddingLeft:2*e.spacing.unit,paddingRight:2*e.spacing.unit},footer:{background:"#3e3e3e",color:"#FFF",position:"fixed",top:"auto",bottom:0,width:"100%",zIndex:e.zIndex.drawer+1}}})(function(e){var t=e.classes;return r.a.createElement("footer",{position:"fixed",color:"primary",className:t.footer},r.a.createElement(z.a,{tabIndex:"0",className:t.p,variant:"body1",color:"inherit",noWrap:!0},"Made by Renisha Christie"))}),ie=a(54),se=a.n(ie);var le=function(e){return r.a.createElement("div",{role:"alert",className:se.a.Modal},r.a.createElement("button",{title:"Close",className:se.a.button,onClick:e.handleClose},"x"),r.a.createElement("h4",{className:se.a.text},e.text))},ce=a(125),ue=a.n(ce),pe=a(127),de=a.n(pe),he=a(126),me=a.n(he),fe=(a(283),function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={location_details:[],restaurant_details:[],popupInfo:null,query:"",error:!1,errorText:"",modalOpen:!1,marker:null},a.highlightMarker=function(e){a.setState({marker:e})},a.getAllLocations=function(){var e=new Headers({"Content-Type":"application/json","user-key":"65dfbcd986c8988878b5d0840e16f2e1"});return fetch("https://developers.zomato.com/api/v2.1/search?entity_id=30&entity_type=city&lat=11.0168&lon=76.9558&establishment_type=16&category=1%2C2%2C5&sort=rating&order=desc&start=0",{headers:e}).then(function(e){return e.ok?e.json():Promise.reject({status:e.status,statusText:e.statusText})})},a.getRestaurantDetails=function(e){var t="https://developers.zomato.com/api/v2.1/restaurant?res_id=".concat(e),a=new Headers({"Content-Type":"application/json","user-key":"65dfbcd986c8988878b5d0840e16f2e1"});return fetch(t,{headers:a}).then(function(e){return e.ok?e.json():Promise.reject({status:e.status,statusText:e.statusText})})},a.updateResInfoClickHandler=function(e){a.state.popupInfo===e?a.setState({popupInfo:null,restaurant_details:[]}):a.setState({popupInfo:e,restaurant_details:[]})},a.updateQuery=function(e){a.setState({query:e.trim()})},a.closeOnClick=function(){a.setState({popupInfo:null})},a.displayStarRating=function(e){for(var t=e,a=[],n=0;n<5;n++)t>1?a.push(1):t>0&&t<1?a.push(.5):a.push(0),t--;return a.map(function(e,t){return 1===e?r.a.createElement(ue.a,{key:t}):.5===e?r.a.createElement(me.a,{key:t}):r.a.createElement(de.a,{key:t})})},a.handleOpen=function(){a.setState({modalOpen:!0})},a.handleClose=function(){a.setState({modalOpen:!1,error:!1,errorText:""})},a.showModal=function(){return a.state.error&&r.a.createElement(le,{open:a.state.error,text:a.state.errorText,handleClose:a.handleClose.bind(Object(d.a)(Object(d.a)(a)))})},a.reduceHeight=function(){return window.innerHeight-(document.querySelector("header").clientHeight+document.querySelector("footer").clientHeight)},a.setPosition=function(){return document.querySelector("header").clientHeight},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"setRestaurantInfo",value:function(e){var t=this;this.getRestaurantDetails(e).then(function(e){t.setState({restaurant_details:e})}).catch(function(e){t.setState({restaurant_details:e}),console.log(e,"Cannot find restaurant details")})}},{key:"componentDidMount",value:function(){var e=this;this.getAllLocations().then(function(t){e.setState(function(){return{location_details:t.restaurants.map(function(e){return{res_id:e.restaurant.R.res_id,name:e.restaurant.name,latitude:e.restaurant.location.latitude,longitude:e.restaurant.location.longitude,locality:e.restaurant.location.locality}})}})}).catch(function(t){e.handleOpen(),e.setState({location_details:t,error:!0,errorText:"Unable to retrieve restaurant locations"}),console.log(t)})}},{key:"render",value:function(){var e;if(this.state.query){var t=new RegExp(m()(this.state.query),"i");e=this.state.location_details.filter(function(e){return t.test(e.name)})}else e=this.state.location_details;return r.a.createElement("div",{className:"App"},r.a.createElement(U,{marker:this.highlightMarker.bind(this),location:e,query:this.state.query,updateQuery:this.updateQuery.bind(this),clickInfo:this.updateResInfoClickHandler.bind(this)}),r.a.createElement(re,{markerId:this.state.marker,marker:this.highlightMarker.bind(this),topPosition:this.setPosition,height:this.reduceHeight,error:this.state.error,location:e,details:this.state.restaurant_details,popupInfo:this.state.popupInfo,displayStarRating:this.displayStarRating,closeOnClick:this.closeOnClick.bind(this),clickInfo:this.updateResInfoClickHandler.bind(this),setRestaurantInfo:this.setRestaurantInfo.bind(this)}),r.a.createElement(oe,null),this.showModal())}}]),t}(n.Component)),ge=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function be(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}a(285).config();var ve=Object(g.createMuiTheme)({palette:{primary:{light:"#646464",main:"#3e3e3e",dark:"#2b2b2b",contrastText:"#fff"},secondary:{light:"#999999",main:"#808080",dark:"#595959",contrastText:"#fff"}}});i.a.render(r.a.createElement(g.MuiThemeProvider,{theme:ve},r.a.createElement(fe,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/neighbourhood-map",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/neighbourhood-map","/service-worker.js");ge?(function(e,t){fetch(e).then(function(a){404===a.status||-1===a.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):be(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):be(t,e)})}}()},54:function(e,t,a){e.exports={Modal:"Modal_Modal__3eaPe",button:"Modal_button__2Ed45",text:"Modal_text__2ibuG"}}},[[129,2,1]]]);
//# sourceMappingURL=main.4d212bc2.chunk.js.map